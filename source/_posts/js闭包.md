---
layout: post
title: js闭包
date: 2017-8-10
categories: blog
tags: [javascript]
description: 最近在学nodejs，所以想要对js做进一步了解，而闭包一直是js里面的一大话题，网上对js闭包的探讨也是一直没停止过。
---
> 其实我觉得作为一个java程序员要理解这种javascript语言特性（感觉都是函数，毕竟函数是js里面对一等公民）挺难的。原谅我一直没有对lambda进行学习(;^ _ ^A。。。

[我是看了这篇文章后才恍然大悟对](https://zhuanlan.zhihu.com/p/22486908)

### 网上有些误导人的说法，说了一些形成闭包对条件，但是它们跟闭包并没有关系。
#### 1 闭包就是嵌套函数
解惑：嵌套函数只是实现闭包对一个条件，因为如果没有嵌套函数就不能声明局部变量，应该说局部变量是闭包的一个因素，因为闭包对目的是隐藏变量。

如果可以通过其他什么方式声明局部变量，那么嵌套函数将没有必要。

#### return 被嵌套函数
解惑：我们会发现基本上所有的闭包写法都是return 被嵌套函数。为什么要这样写呢？
```
function foo(){
  var local = 1
  function bar(){
    local++
    return local
  }
  return bar
}

var func = foo()
func()
```
原因只有一个，那就是让这个方法可以对外使用！！！。所以说这个和闭包也没有关系。

你可以定义一个全局方法来实现闭包，那么就不需要将嵌套函数作为返回值。

举个例子
```
function(){

  var a = 50

  window.aPlus = function(){
    a += 1
  }
}();

```
可以看到这里就没有返回嵌被套函数。
![image](http://upload-images.jianshu.io/upload_images/3351492-fdcc30bfa9b8f734.png)

### 到底什么是闭包
这里引用文章作者的定义。

**「函数」和「函数内部能访问到的变量」（也叫环境）的总和，就是一个闭包**。
其实上面对那张图也表明了这个意思，所谓的你的外部函数，返回值，并不属于闭包对范畴。

### 向作者学习

作者的一句话很对！！！

**如果你觉得一个概念很复杂，那么很可能是你理解错了。**